<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0" />
<title>Task Pulse</title>
<link rel="icon" href="favicon.png" type="image/png" />
<meta name="theme-color" content="#0f111a" />

<style>
/* ======= base styles ======= */
*{box-sizing:border-box;margin:0;padding:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,sans-serif;-webkit-font-smoothing:antialiased;}
body{
  background:#0f111a;
  background-image:
    radial-gradient(circle at 20% 20%,rgba(80,90,255,.16)0%,rgba(15,17,26,0)60%),
    radial-gradient(circle at 80% 30%,rgba(255,0,128,.12)0%,rgba(15,17,26,0)60%);
  color:#e9e9ef;
  max-width:480px;
  margin:0 auto;
}
main{padding:16px 16px 140px;}

/* ======= header ======= */
header{
  text-align:center;
  padding:20px 12px;
  background:linear-gradient(180deg,#1b1d2e 0%,#0f111a 100%);
  border-radius:0 0 20px 20px;
  box-shadow:0 10px 40px rgba(0,0,0,.6);
}
header .title{
  font-size:1.4rem;
  font-weight:700;
  color:#fff;
  letter-spacing:.5px;
  text-shadow:0 0 8px rgba(89,102,255,.7);
}
header .date{
  font-size:.9rem;
  color:#bdbdfd;
  margin-top:6px;
}
header .credit{
  font-size:.7rem;
  color:#8a8aff;
  margin-top:8px;
}

/* ======= tab bar ======= */
.tab-bar{
  display:flex;
  justify-content:center;
  gap:8px;
  padding:16px;
}
.tab-btn{
  flex:1;
  text-align:center;
  background:rgba(255,255,255,0.05);
  border:1px solid rgba(255,255,255,0.15);
  color:#c7c7ff;
  padding:12px 14px;
  border-radius:12px;
  font-size:.95rem;
  font-weight:500;
  transition:all .25s ease;
  backdrop-filter:blur(6px);
  box-shadow:0 6px 18px rgba(0,0,0,.3);
}
.tab-btn:hover{transform:translateY(-1px);cursor:pointer;}
.tab-btn.tab-active{
  background:#ffffff;
  color:#1a1a1a;
  border:1px solid #ffffff;
  box-shadow:0 0 16px rgba(89,102,255,.7);
}

/* ======= cards ======= */
.card{
  background:#ffffff;
  border:1px solid rgba(255,255,255,0.6);
  border-radius:16px;
  box-shadow:0 20px 50px rgba(0,0,0,.5);
  padding:16px;
  margin-bottom:20px;
  color:#1a1a1a;
}
.section-headline{display:flex;justify-content:space-between;flex-wrap:wrap;row-gap:8px;margin-bottom:12px;}
.section-title{font-size:1rem;font-weight:600;color:#111;}
.section-sub{font-size:.8rem;color:#444;text-align:right;min-width:max-content;padding-left:8px;line-height:1.3;}
.small{font-size:.8rem;color:#666;}

/* ======= spend list ======= */
.spend-row,.spend-total-row{
  display:grid;
  grid-template-columns:1fr auto auto;
  align-items:flex-start;
  column-gap:8px;
  font-size:.8rem;
  line-height:1.4;
  word-break:break-word;
}
.spend-row{padding:8px 0;border-bottom:1px solid #e4e4e7;}
.spend-total-row{font-weight:600;color:#c00000;padding-top:12px;}
.spend-right{text-align:right;min-width:70px;}
.spend-total-row .spend-right{color:#c00000;font-size:1rem;}

/* ======= inputs ======= */
.input-row{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:8px;}
.input-field,.input-select{
  flex:1;
  min-width:120px;
  border:1px solid #cfcfd3;
  border-radius:10px;
  padding:10px 12px;
  font-size:.9rem;
  background:#fff;
  color:#1a1a1a;
}
.add-btn{
  border-radius:10px;
  background:#1d1d1f;
  color:#fff;
  border:1px solid #1d1d1f;
  font-size:.85rem;
  font-weight:500;
  padding:10px 14px;
  min-width:70px;
}

/* ======= grocery list ======= */
.grocery-list-area{border-top:1px solid #e4e4e7;margin-top:8px;padding-top:8px;}
.grocery-row{display:flex;align-items:flex-start;justify-content:space-between;border-bottom:1px solid #e4e4e7;padding:8px 0;font-size:.9rem;line-height:1.4;}
.grocery-left{display:flex;align-items:flex-start;gap:8px;color:#111;max-width:80%;}
.grocery-name{font-weight:500;color:#111;}
.grocery-name.grocery-done{color:#888;text-decoration:line-through;}
.grocery-del{background:#fff;border:1px solid #cfcfd3;border-radius:8px;color:#c00000;font-size:.8rem;font-weight:600;line-height:1;min-width:32px;min-height:32px;}
.grocery-hint{font-size:.7rem;color:#666;margin-top:8px;}
</style>
</head>

<body>
<header>
  <div class="title">Task Pulse</div>
  <div class="date" id="headerToday">--</div>
  <div class="credit">Powered by Daryl G</div>
</header>

<nav class="tab-bar">
  <button id="tabSpend" class="tab-btn tab-active">Spend</button>
  <button id="tabGroceries" class="tab-btn">Groceries</button>
</nav>

<main>
  <div id="spendScreen">
    <!-- Place your Spending / Reports cards here -->
    <section class="card">
      <div class="section-headline">
        <div class="section-title">Spending (this day)</div>
        <div class="section-sub" id="dayTotalLine">R 0.00</div>
      </div>
      <div id="spendList"></div>
      <div class="spend-total-row">
        <div></div><div></div>
        <div class="spend-right" id="spendTotalRed">R 0.00</div>
      </div>
    </section>
  </div>

  <div id="groceryScreen" style="display:none;">
    <section class="card">
      <div class="section-headline">
        <div class="section-title">Groceries</div>
        <div class="section-sub" style="font-size:.7rem;">Offline list</div>
      </div>
      <div class="input-row">
        <input id="newGroceryItem" class="input-field" placeholder="Add grocery item..." />
        <button id="addGroceryBtn" class="add-btn">Add</button>
      </div>
      <div id="groceryList" class="grocery-list-area"></div>
      <div class="grocery-hint">Tap checkbox when bought · “×” deletes · auto-saved offline</div>
    </section>
  </div>
</main>

<script>
/* ===== Helper Functions ===== */
function pad2(n){return String(n).padStart(2,"0");}
function todayISO(){const d=new Date();return d.getFullYear()+"-"+pad2(d.getMonth()+1)+"-"+pad2(d.getDate());}
function formatISOasDMY(i){const[a,b,c]=i.split("-");return c+"-"+b+"-"+a;}

/* ===== Storage Helpers ===== */
function load(k){return JSON.parse(localStorage.getItem(k)||"[]");}
function save(k,v){localStorage.setItem(k,JSON.stringify(v));}

/* ===== Grocery Logic ===== */
function newGrocery(n){return{id:"g_"+Math.random().toString(36).slice(2,9),name:n,done:false};}
function renderGroceries(){
  const list=load("tp_groceries"),box=document.getElementById("groceryList");
  if(!list.length){box.innerHTML="<div class='small' style='color:#444'>List empty</div>";return;}
  box.innerHTML=list.map(g=>`
  <div class="grocery-row">
    <label class="grocery-left">
      <input type="checkbox" ${g.done?"checked":""} onclick="toggleGro('${g.id}')">
      <span class="grocery-name ${g.done?'grocery-done':''}">${g.name}</span>
    </label>
    <button class="grocery-del" onclick="delGro('${g.id}')">×</button>
  </div>`).join("");
}
function addGro(){const i=document.getElementById("newGroceryItem");const n=i.value.trim();if(!n)return;
  const l=load("tp_groceries");l.push(newGrocery(n));save("tp_groceries",l);i.value="";renderGroceries();}
function toggleGro(id){const l=load("tp_groceries");const x=l.find(g=>g.id===id);if(x){x.done=!x.done;save("tp_groceries",l);renderGroceries();}}
function delGro(id){let l=load("tp_groceries");l=l.filter(g=>g.id!==id);save("tp_groceries",l);renderGroceries();}

/* ===== Tab Switching ===== */
function showSpend(){
  document.getElementById("spendScreen").style.display="block";
  document.getElementById("groceryScreen").style.display="none";
  tabSpend.classList.add("tab-active");
  tabGro.classList.remove("tab-active");
}
function showGro(){
  document.getElementById("spendScreen").style.display="none";
  document.getElementById("groceryScreen").style.display="block";
  tabGro.classList.add("tab-active");
  tabSpend.classList.remove("tab-active");
  renderGroceries();
}

/* ===== Initialize ===== */
const tabSpend=document.getElementById("tabSpend"),tabGro=document.getElementById("tabGroceries");
tabSpend.onclick=showSpend;tabGro.onclick=showGro;
document.getElementById("addGroceryBtn").onclick=addGro;
document.getElementById("headerToday").textContent=formatISOasDMY(todayISO());
renderGroceries();
</script>
</body>
</html>
